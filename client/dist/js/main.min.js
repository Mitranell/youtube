/*
 NewYearsEveMix 2015-12-16 
*/
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("./test.js"),e=a("./ui.js");dancer=new Dancer,setSrc=function(a){dancer.load({src:a})},startPlaylist=function(a){var b=a[Math.floor(Math.random()*a.length)];setSrc(d.dir+b),play()},play=function(){dancer.play()},pause=function(){dancer.pause()},setVolume=function(a){dancer.setVolume(a)},getSpectrum=function(){return dancer.getSpectrum()},getWaveform=function(){return dancer.getWaveform()},kick=dancer.createKick({frequency:[1,3],threshold:.4,onKick:function(a){e.kick()},offKick:function(a){e.noKick()}}),kick.on(),b.exports={getSpectrum:getSpectrum,startPlaylist:startPlaylist}},{"./test.js":3,"./ui.js":5}],2:[function(a,b,c){var d=(a("./timing.js"),a("./test.js")),e=a("./audio.js"),f=a("./ui.js");$(window).resize(function(){f.resize()});var g={};g.w=function(){return $(window).width()},g.h=function(){return $(window).height()};var h={};h.readFile=function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!1),c.onreadystatechange=function(){if(4===c.readyState&&(200===c.status||0===c.status)){var a=c.responseText;console.log(a),b&&b(a)}},c.send(null)},h.readFile(d.dir+"tracklist.txt",function(a){a=a.split(","),console.log(a),e.startPlaylist(a),f.render()}),f.resize()},{"./audio.js":1,"./test.js":3,"./timing.js":4,"./ui.js":5}],3:[function(a,b,c){this.track="1.Hardstyle637Mark van der Pijl.mp3",this.dir="../client/tracks/",this.src=this.dir+this.track},{}],4:[function(a,b,c){deadline="2016-01-01",getRemaining=function(){var a=Date.parse(deadline)-Date.now(),b=Math.floor(a/1e3%60),c=Math.floor(a/1e3/60%60),d=Math.floor(a/36e5%24),e=Math.floor(a/864e5);return{total:a,days:e,hours:d,minutes:c,seconds:b}},getCurMs=function(){return Date.now()},getRemainingMs=function(){return getRemaining().total},console.log("CurMs:"+getCurMs()),console.log("Till deadline:");var d=getRemaining();console.log("Days:"+d.days),console.log("hours:"+d.hours),console.log("minutes:"+d.minutes),console.log("seconds:"+d.seconds),b.exports={getCurMs:getCurMs}},{}],5:[function(a,b,d){var e=a("./audio.js"),f=a("./timing.js"),g={};g.canvasWrapper=$("#canvasWrapper"),g.canvasWrapperWidth=function(){return g.canvasWrapper.width()},g.canvasWrapperHeight=function(){return g.canvasWrapper.height()},g.theater=$("#theater"),g.skull=$("#skull");var h={};h.bg="#1e2230",h.blue="#26477d",h.white="rgba(255,255,255,1)",c=document.getElementById("canvas"),ctx=c.getContext("2d"),resize=function(){c.width=g.canvasWrapperWidth(),c.height=g.canvasWrapperHeight()},render=function(){requestAnimationFrame(render);f.getCurMs();draw()},canAnimateKick=!0,kick=function(){console.log("kick"),canAnimateKick=!1,TweenLite.to(g.theater,.1,{scale:1.05,onComplete:function(){canAnimateKick=!0}})},noKick=function(){canAnimateKick&&TweenLite.to(g.theater,.1,{scale:1})},draw=function(){var a={};a.data=e.getSpectrum(),a.size=a.data.length/6,a.barWidth=g.canvasWrapperWidth()/a.size,x=0,ctx.clearRect(0,0,g.canvasWrapperWidth(),g.canvasWrapperHeight());for(var b=0;b<a.size;b++)a.barHeight=1500*a.data[b],ctx.fillStyle=h.white,ctx.fillRect(x,g.canvasWrapperHeight()/2-a.barHeight/2,a.barWidth,a.barHeight),x+=2*a.barWidth},b.exports={kick:kick,noKick:noKick,render:render,resize:resize}},{"./audio.js":1,"./timing.js":4}]},{},[2]);